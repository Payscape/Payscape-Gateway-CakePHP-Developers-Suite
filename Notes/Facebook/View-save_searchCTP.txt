<div id="fb-root"></div><script src="//connect.facebook.net/en_US/all.js"></script><script type="text/javascript">
//<![CDATA[

    window.fbAsyncInit = function() {
        FB.init({
            appId      : '464241496960467', // App ID
            channelURL : '../../Vendor/channel.php', // Channel File
            status     : true, // check login status
            cookie     : true, // enable cookies to allow the server to access the session
            oauth      : true, // enable OAuth 2.0
            xfbml      : true  // parse XFBML
        });

        FB.Event.subscribe('auth.login',function(){window.location.reload()});

        // Checks whether the user is logged in
        FB.getLoginStatus(function(response) {
            if (response.authResponse) {
                // logged in and connected user, someone you know
                // alert('You are connected');
            } else {
                // no user session available, someone you dont know
                // alert('You are disconnected');
            }
        });

        FB.Event.subscribe('auth.authResponseChange', function(response) {
            if (response.authResponse) {
                // the user has just logged in
                // alert('You just logged in facebook from somewhere');
            } else {
                // the user has just logged out
                // alert('You just logged out from faceboook');
            }
        });

        // Other javascript code goes here!

    };

    // Customized FB Connect button according to UI - Added by Vinod Patidar | 10 Sept 2012
    function fb_login(){
        FB.login(function(response) {
            if (response.authResponse) {
            console.log('Welcome!  Fetching your information.... ');
            console.log(response); // dump complete info
            access_token = response.authResponse.accessToken; //get access token
            user_id = response.authResponse.userID; //get FB UID

            FB.api('/me', function(response) {
                user_email = response.email; //get user email
              // you can store this data into your database
            });

            } else {
            //user hit cancel button
            console.log('User cancelled login or did not fully authorize.');

            }
        }, {
            scope: 'email,user_about_me,user_birthday,user_location,user_photos,publish_stream'
        });
    }

    // Customized FB Connect button and saving property relevant information as temporarily...
    function fb_property_login() {
        if ( ! $('#PropertyCreateSpaceForm').validate( ).form( )) {
            return false;
        }

        $('#PropertyConnectWithFb').val('1');

        var data = $('#PropertyCreateSpaceForm').serialize();
        var post_url = '/vacationfish.localdomain/public_html/create-space';
        $.post(post_url, data);

        FB.login(function(response) {
            if (response.authResponse) {
            console.log('Welcome!  Fetching your information.... ');
            console.log(response); // dump complete info
            access_token = response.authResponse.accessToken; //get access token
            user_id = response.authResponse.userID; //get FB UID

            FB.api('/me', function(response) {
                user_email = response.email; //get user email
              // you can store this data into your database
            });

            } else {
            //user hit cancel button
            console.log('User cancelled login or did not fully authorize.');

            }
        }, {
            scope: 'email,user_about_me,user_birthday,user_location,user_photos,publish_stream'
        });

    }
    // logs the user in the application and facebook
    function login(redirection){
        FB.login(function (response) {
            if(response.authResponse) {
                // user is logged in
                console.log('Welcome!');
                console.log(response);
                if(redirection != null && redirection != ''){
                    top.location.href = redirection;
                }
            } else {
                // user could not log in
                console.log('User cancelled login or did not fully authorize.');
            }
        }, {scope: 'email'});
    }

    // logs the user out of the application and facebook
    function logout(redirection){
        FB.logout(function(response) {
            // user is logged out
            // redirection if any
            if(redirection != null && redirection != ''){
                top.location.href = redirection;
            }
        });
    }

    // Load the SDK Asynchronously
    (function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol
    + '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
    }());
//]]>
</script>