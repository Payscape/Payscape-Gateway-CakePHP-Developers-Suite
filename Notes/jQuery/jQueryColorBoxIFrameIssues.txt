ColorBox ›
resize iframe after new content loaded
7 posts by 6 authors
    
    martin.k...@wai.co.uk   
12/8/09
Hey,

so I open colorbox with an iframe. This iframe has a registration
form. After submitting it another form loads which has different
dimensions then the first one. So what I was trying to do was in the
second Iframe run the code:

<form>
   ... blah blah ...
</form>

<script type="text/javascript">
    $(document).ready(function() {
        parent.$.fn.colorbox.resize();
    });
</script>

However this resizes colorbox to some wired dimensions approx half of
the height I need. And then strangely loads the first iframe
content...

any ideas?

Thanks
    Jack Moore  
12/8/09
You aren't going to be able to use it with iframes as there is no way
for JS running in the parent document to know what size (or any other
info) of the contents of the iframe are - this is why iframes require
a set size.  JS in the parent document cannot see into an iframe.
- show quoted text -
> --
>
> You received this message because you are subscribed to the Google Groups "ColorBox" group.
> To post to this group, send email to colo...@googlegroups.com.
> To unsubscribe from this group, send email to colorbox+u...@googlegroups.com.
> For more options, visit this group at http://groups.google.com/group/colorbox?hl=en.
>
>
>



-- 
Jack Moore
colorpowered.com
twitter.com/jacklmoore
    BCP     
12/12/09
Hi,

This is what we did to get dynamic iframe sizing with colorbox. We can
use forms, as as the form posts, colorbox will automatically resize
itself to the new iframe size.

1) we added our own little resize method (inserted just above
"cboxPublic.resize = ..." in jquery.colorbox.js):

    cboxPublic.myResize = function(iW, iH) {
        if (!open) { return; }
        if (settings.scrolling) { return; }
        var speed = settings.transition === "none" ? 0 :
settings.speed;
        $window.unbind(cbox_resize);
        settings.w = iW;
        settings.h = iH;
        $loaded.css({ width: settings.w, height: settings.h });
        cboxPublic.position(speed);
    };

Then in the popup iframe:

$(document).ready(function() {
    // load
    $(window).bind("load", function() {

        // preload all images to help height calc (might not be
needed)
        if (bPreLoadImages) {
            $("img").each(function(idx, elm) {
                $("<img>").attr("src", elm.src);
            });
        }

        // get doc width/height (add a bit extra for non ie)
        var iOffSet = ($.browser.msie) ? 0 : 20;
        var iW = $(document).width();
        var iH = $(document.body).height() + iOffSet;

        // debug: use alert below to get calc dimensions on load
        // alert("iframe: (w:" + iW + ", h:" + iH + ")");

        // adjust size
        parent.$.fn.colorbox.myResize(iW, iH);

    });
});



Hope that helps.
-bcp



On Dec 8, 1:00 pm, "martin.klobus...@wai.co.uk"
- show quoted text -
    farser  
12/16/09
BCP, thanks very much for your solution.

A note to others:  I couldn't get this to work until I set scrolling
to false in the initial colorbox call.

Also, the code below suggested for the iframe page breaks it for some
reason.

// preload all images to help height calc (might not be needed)
        if (bPreLoadImages) {
            $("img").each(function(idx, elm) {
                $("<img>").attr("src", elm.src);
            });
        }

Other than that, it works pretty well!

Many thanks to BCP and to Jack for a smokin library!

Cheers





On Dec 13, 2:50 am, BCP <b...@bcproductionsinc.com> wrote:
> Hi,
>
> This is what we did to get dynamic iframe sizing with colorbox. We can
> use forms, as as the form posts, colorbox will automaticallyresize
> itself to the new iframe size.
>
> 1) we added our own littleresizemethod (inserted just above
> "cboxPublic.resize= ..." in jquery.colorbox.js):
- show quoted text -
    BCP     
12/19/09
Hi farser,

I'm glad the code helped.  You can remove the "if (bPreLoadImages)
{ ... }" conditional. I forgot to clean that up when I pasted the
code.

-bcp
- show quoted text -

    new...@tobiasjung.net   
6/7/10
Hello,

digging up an old thread...
Mostly because I just wanted to say THANK YOU for that solution!
I just needed something like this and it works great here.

And then, I have two questions:
1) bcp: Why does it stop when scrolling is set to true?
> if (settings.scrolling) { return; }
Are there any problems when it's used with "scrolling:true", or is it
just because... well, it's in most cases contradictory apply scrollbars
on the one hand when on the other you want the overlay to resize?

2) Jack: Any chance that this modification will find it's way into the
"official" release of Colorbox?

Kind regards,
Tobias Jung


BCP <b...@bcproductionsinc.com> wrote (Sat, 12 Dec 2009 07:50:51 -0800):
- show quoted text -

    sunbeam     
6/30/10
Hello there, nice job u r all doing here, thanks for that.

Ok, I'm using color box on a development environment in our company,
and wanted to ask the following thing. I'm calling a php file
(splitted into 3 parts) into a color box with the iFrame method from
the main page like that:

<script type="text/javascript">
   var $j = jQuery.noConflict();

   $j(document).ready(function(){
   $j("a[href='somefile.php?what=selection']").colorbox({width:"95%",
height:"95%", iframe:true, overlayClose:false});
   });

</script>

<a href'somefile.php?what=selection'>show me the options</a>

=================================================================================================

The file somefile.php is structured like that:

$what = $_GET['what'];

if ($what == 'selection'){
   <a href="'somefile.php?what=case1">this is case 01</a><br />
   <a href="'somefile.php?what=case2">this is case 02</a>
}

if ($what == 'case1'){
   echo "<table cellpadding='0 ' cellspacing='0 ' style='width: 500px;
height: 500px'>";
   echo "<tr><td>Case 01 Content (500px X 500px)</td></tr>";
   echo "</table>";
}

if ($what == 'case2'){
   echo "<table cellpadding='0 ' cellspacing='0 ' style='width: 800px;
height: 800px'>";
   echo "<tr><td>Case 02 Content (800px X 800px)</td></tr>";
   echo "</table>";
}

And added on top of that page (somefile.php) the code u suggested:

$j (document).ready(function() {
    // load
$j (window).bind("load", function() {
        // get doc width/height (add a bit extra for non ie)
        var iOffSet = ($j.browser.msie) ? 0 : 20;
        var iW = $j (document).width();
        var iH = $j (document.body).height() + iOffSet;
        // debug: use alert below to get calc dimensions on load
        // alert("iframe: (w:" + iW + ", h:" + iH + ")");
        // adjust size
        parent. $j.fn.colorbox.myResize(iW, iH);
    });

=================================================================================================

Also, added your resize method into the JS file.

Normally, is should open the color box (95% to 95%), show me the 2
options I have(link to case 01, and link to case 02), and by clicking
on it, it should reload the same file (somefile.php) into the same
color box, but should it there recognize the inner element (TABLE) and
its size ?? to be honest, it does not. Tried even to have separate
files for each case, but again with no luck.

What am I doing wrong?? Any help would be appreciated.

Jan

(PS: im using prototype and jQuery library, that's why I have the var
$j = jQuery.noConflict(); Tried this one without the prototype stuff,
just the code of color box, but again with no luck)


On 7 Ιούν, 17:13, "Tobias Jung" <new...@tobiasjung.net> wrote:
> Hello,
>
> digging up an old thread...
> Mostly because I just wanted to say THANK YOU for that solution!
> I just needed something like this and it works great here.
>
> And then, I have two questions:
> 1) bcp: Why does it stop when scrolling is set to true?> if (settings.scrolling) { return; }
>
> Are there any problems when it's used with "scrolling:true", or is it
> just because... well, it's in most cases contradictory apply scrollbars
> on the one hand when on the other you want the overlay toresize?
>
> 2) Jack: Any chance that this modification will find it's way into the
> "official" release ofColorbox?
>
> Kind regards,
> Tobias Jung
>
> BCP <b...@bcproductionsinc.com> wrote (Sat, 12 Dec 2009 07:50:51 -0800):
>
> > Hi,
>
> > This is what we did to get dynamic iframe sizing withcolorbox. We can
> > use forms, as as the form posts,colorboxwill automaticallyresize
> > itself to the new iframe size.
>
> > 1) we added our own littleresizemethod (inserted just above
> > "cboxPublic.resize= ..." in jquery.colorbox.js):
- show quoted text -
> >> so I opencolorboxwith an iframe. This iframe has a registration
> >> form. After submitting it another form loads which has different
> >> dimensions then the first one. So what I was trying to do was in the
> >> second Iframe run the code:
>
> >> <form>
> >>    ... blah blah ...
> >> </form>
>
> >> <script type="text/javascript">
> >>     $(document).ready(function() {
> >>         parent.$.fn.colorbox.resize();
> >>     });
> >> </script>
>
> >> However this resizescolorboxto some wired dimensions approx half of
- show quoted text -
